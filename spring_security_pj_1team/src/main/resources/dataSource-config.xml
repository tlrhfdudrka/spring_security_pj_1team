<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- Mybatis 설정 시작 -->
    <!-- 컨넥션풀 -->
    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"> <!-- 3. JndiObjectFactoryBean 커넥션 정보-->
       <property name="jndiName" value="java:comp/env/jdbc/spring_pj_1team" />
       <property name="resourceRef" value="true" />
    </bean>
    
    <!-- Mybatis 파일 위치 지정, 컨넥션풀 -->
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
       <property name="dataSource" ref="dataSource" />
       <property name="mapperLocations" value="classpath:mappers/**/*.xml" />  <!-- name="mapperLocations" : sql문 따로 독립되서 나가는데 그 위치를 나타냄 --> <!-- "classpath:mappers/**/*.xml" 매퍼위치 나타냄 -->
    </bean>
    
    <!-- 1. id="sqlSession" 진입점만 호출하면 ref를 통해 2번  id="sqlSessionFactory" 호출하고  ref="dataSource" 호출되면 3.커넥션까지 갈 수있다. -->
    <!-- 생성자 DI이며, sqlSession이 참조변수 --> <!-- 객체 생성함 : SqlSessionTemplate sqlSession(참조변수) = new SqlSessionTemplate(sqlSessionFactory); -->
    <bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"> <!-- SqlSessionTemplate 세션 템블릿을 객체 생성하라 --> 
         <constructor-arg ref="sqlSessionFactory" /> <!-- 생성자 인데 매개변수 / ref 어디엔가 이 이름으로 된 아이디가 있을 것이다. ref="sqlSessionFactory" => -id="sqlSessionFactory"-->
      </bean>
      
      <!-- Mybatis 설정 종료 -->
      
</beans>
